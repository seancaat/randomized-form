<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>Whitney</title>
<meta name="Sean" content="">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../tachyons.css">
<script type="text/javascript" src="../two.min.js"></script>
<script type="text/javascript" src="../Tween.js"></script>
<script type="text/javascript" src="../RequestAnimationFrame.js"></script>  
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  
  <style>
    iframe {
      -webkit-user-select: none; /* Safari */        
      -moz-user-select: none; /* Firefox */
      -ms-user-select: none; /* IE10+/Edge */
      user-select: none; /* Standard */
      position: fixed;
      top: 0;
    }
    
/*
    #rl {
      background-image: url("_images/splosion.jpg");
      background-repeat: none;
      background-size: cover;
    }
*/
  </style>
  
  <body>
    
    <section id="rl" class="w-100 vh-100 bg-black">
    </section>

    <script>      
      var elem = document.getElementById('rl');
      var params = { width: window.innerWidth, height: window.innerHeight };
      var two = new Two(params).appendTo(elem);

      var mid = {x: two.width / 2, y: two.height / 2};
      var width = two.width;
      var height = two.height;
      var margin = 50;
      
      var x_margin = 420;
      var y_margin = 200;
      
      var cir = two.makeCircle(-x_margin + mid.x, -y_margin + mid.y, 125);
      var cir1 = two.makeCircle(-x_margin + mid.x, -y_margin + mid.y, 125);
//      cir.noFill();
//      cir.stroke = "white";
      
      var angle = 0;
      
      var line;
      var lines = two.makeGroup();
      var lines1 = two.makeGroup();
      
      for (i = 0; i < 38; i++) {
        line = two.makeLine(-x_margin + mid.x + 150 * Math.cos(angle + i / (4*Math.PI)), 
                            -y_margin + mid.y + 150 * Math.sin(angle + i / (4*Math.PI)), 
                            
                            -x_margin + mid.x + 150 * Math.cos(angle - i / (4*Math.PI) - Math.PI/5), 
                            -y_margin + mid.y + 150 * Math.sin(angle - i / (4*Math.PI) - Math.PI/5)
                           );        
        line.stroke = "white";
        line.linewidth = 0.5 + i / 5;
        lines.add(line);
      }
      
      for (i = 0; i < 38; i++) {
        line = two.makeLine(x_margin + mid.x + 150 * Math.cos(angle + i / (4*Math.PI)), 
                            y_margin + mid.y + 150 * Math.sin(angle + i / (4*Math.PI)), 
                            
                            x_margin + mid.x + 150 * Math.cos(angle - i / (4*Math.PI) - Math.PI/3), 
                            y_margin + mid.y + 150 * Math.sin(angle - i / (4*Math.PI) - Math.PI/3)
                           );        
        line.stroke = "white";
        line.linewidth = 0.5 + i / 5;
        lines1.add(line);
      }
      
      var squiggle;
      var vertex;
      var vertices = [];
      var s_amp = 40;
      
      for(i = 0; i < 23; i++) {
          vertex = new Two.Anchor(100 * i,
                                  mid.y + s_amp * Math.cos(i * width / 11),
                                  0, 0, 0, 0,
                                  Two.Commands.curve);
          vertices.push(vertex);
//          console.log(vertices[i].x + "," + vertices[i].y);
      }
      
      console.log(vertices.length);
      
      squiggle = two.makeCurve(vertices, false, true);
      squiggle.noFill();
      squiggle.stroke = "white";
      squiggle.linewidth = 4;
      
      two.add(squiggle);
      
      two.bind('update', function() {
        
        cir.translation.set(-x_margin + mid.x  + 10 * Math.cos(two.frameCount / 6.55), 
                            -y_margin + mid.y  + 10 * Math.sin(two.frameCount / 6));  
        
        cir1.translation.set(x_margin + mid.x  - 10 * Math.cos(two.frameCount / 6.4), 
                             y_margin + mid.y  - 10 * Math.sin(two.frameCount / 6));  
      }).play();
      
      lines.mask = cir;
      lines1.mask = cir1;
      
      
      two.update();
    </script>
    
  </body>