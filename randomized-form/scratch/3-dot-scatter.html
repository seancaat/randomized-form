<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>Ravyn Lenae - Moon Shoes</title>
<meta name="Sean" content="">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../tachyons.css">
<script type="text/javascript" src="../two.min.js"></script>
<script type="text/javascript" src="../Tween.js"></script>
<script type="text/javascript" src="../RequestAnimationFrame.js"></script>  
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  
  <style>
    #rl {
      background-image: url("_images/splosion.jpg");
      background-repeat: none;
      background-size: cover;
    }
  </style>
  
  <body>
    
    <section id="rl" class="w-100 vh-100"></section>
    
    <script>
      
      var colors = [
        'rgb(236,112,99)',
        'rgb(155,96,52)',
        'rgb(245,189,75)',
        'rgb(231,231,130)',
        'rgb(234,240,183)',
        'rgb(173,213,167)',
        'rgb(106,183,128)',
        'rgb(109,191,137)',
        'rgb(34,95,62)',
        'rgb(124,199,177)',
        'rgb(106,188,204)',
        'rgb(131,207,240)',
        'rgb(184,209,236)',
        'rgb(62,88,167)',
        'rgb(212,175,207)',
        'rgb(245,219,234)',
        'rgb(250,190,208)',
        'rgb(245,287,203)',
        'rgb(211,3,34)',
        'rgb(90,86,88)',
        'rgb(113,113,113)',
        'rgb(202,202,202)',
      ];
      // organic shape with randomly placed vertices
      var elem = document.getElementById('rl');
      var params = { width: window.innerWidth, height: window.innerHeight };
      var two = new Two(params).appendTo(elem);

      var mid = {x: two.width / 2, y: two.height / 2};
      var width = two.width;
      var height = two.height;

      //    var radius = two.height / 5;
      var coordinates = [];
      var points = [];
      var num_vertices = 28;
      var orbs = two.makeGroup();
      var poly;
//      var rand_rad;
//      var rand_angle;
      
      $( "#rl" ).click(function() {
        map();
        scatter();
      })
      
      // Generate random coordinates
      function map() {
        
        for(i = 0; i < num_vertices; i++) {
          var rand_rad = 270 * Math.random();
          var rand_angle = 1000 * Math.random();
          var pos = {x: Math.cos(rand_angle * Math.PI / 180) * rand_rad,
                     y: Math.sin(rand_angle * Math.PI / 180) * rand_rad};

          var rand_pos = {x: mid.x + pos.x, y: mid.y + pos.y};
          coordinates.push(rand_pos);
        }
      }
      
      // move each circle to those coordinates
      function scatter() {
        var point = two.makeCircle(mid.x, mid.y, 7);
        point.noStroke();
        point.noFill();
        points.push(point);
        for(i = 0; i < num_vertices; i++) {
          var cir = point.clone();
          cir.fill = colors[Math.floor(Math.random() * colors.length)];
          cir.noStroke();
          points.push(cir);
          var s_tween = new TWEEN.Tween(cir.translation)
                               .to({x: coordinates[i].x, y: coordinates[i].y}, 500)
                               .easing(TWEEN.Easing.Exponential.Out)
                               .start();
          
          s_tween.onComplete(function() {
            for(i = 0; i < points.length; i++) {
              var f_tween = new TWEEN.Tween(points[i])
                                      .to({scale: 7.5, opacity: 0}, 590)
                                      .easing(TWEEN.Easing.Exponential.Out)
                                      .delay(Math.random() * 100 + 200)
                                      .start();
              f_tween.onComplete(function() {
                coordinates = [];
                TWEEN.removeAll();
                two.clear();
                two.update();  
              });
            }
          });
        } 

        animate();

        function animate() {
            requestAnimationFrame(animate);
            TWEEN.update();
            two.update();
        }  
      }
      
      
    </script>
    
  </body>