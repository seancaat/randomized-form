<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>Oskar</title>
<meta name="Sean" content="">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../tachyons.css">
<script type="text/javascript" src="../two.min.js"></script>
<script type="text/javascript" src="../Tween.js"></script>
<script type="text/javascript" src="../RequestAnimationFrame.js"></script>  
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  
  <body>
    
    <section id="rl" class="w-100 vh-100 bg-blue"></section>
  
    <script>
      
      var colors = [
        'rgb(249,14,27)',
        'rgb(250,40,251)',
        'rgb(11,36,250)',
        'rgb(45,254,254)',
        'rgb(254,253,56)',
        'rgb(41,251,47)'
      ];
      
      var elem = document.getElementById('rl');
      var params = { width: window.innerWidth, height: window.innerHeight };
      var two = new Two(params).appendTo(elem);

      var mid = {x: two.width / 2, y: two.height / 2};
      var width = two.width;
      var height = two.height;
      
      $( "#rl" ).click(function() {
//        map();
        scatter();
      });
      
      var dash;
      var dashes = two.makeGroup();
      
      for (i = 0; i < 805; i++) {
        if (i % 15 === 0) {
          dash = two.makeLine(mid.x - 50, i, mid.x + 50, i + 80);
          dash.linewidth = 3;  
          dashes.add(dash);
        }
      }
      
//      console.log(dashes.translation.x + " " + dashes.translation.y);
      dashes.center();
      dashes.translation.set(mid.x, mid.y);
      
      var rect = two.makeRectangle(mid.x, mid.y, 1000, height);
      rect.noStroke();
      rect.fill = "#357EDD";
      
      two.update();
      
      function scatter() {
        
        var tween = new TWEEN.Tween(rect.translation)
                               .to({y: height * 2}, 3000)                               
//                               .easing(TWEEN.Easing.Exponential.Out)
                               .start();
       
        tween.onComplete(function () {
          TWEEN.removeAll();
          rect.translation.set(mid.x, -500);
        });
        
        animate();
        

        function animate() {
            requestAnimationFrame(animate);
            TWEEN.update();
            two.update();
        }  
      }
      
      
    </script>
    
  </body>